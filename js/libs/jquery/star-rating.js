!function(a){var b=0,c=5,d=.5,e=function(b,c){return"undefined"==typeof b||null===b||void 0===b||b==[]||""===b||c&&""===a.trim(b)},f=function(a,b,c){var d=e(a.data(b))?a.attr(b):a.data(b);return d?d:c[b]},g=function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},h=function(a,b){return parseFloat(a.toFixed(b))},i=function(b,c){this.$element=a(b),this.init(c)};i.prototype={constructor:i,_parseAttr:function(a,g){var h=this,i=h.$element;if("range"===i.attr("type")||"number"===i.attr("type")){var j=f(i,a,g),k=d;"min"===a?k=b:"max"===a?k=c:"step"===a&&(k=d);var l=e(j)?k:j;return parseFloat(l)}return parseFloat(g[a])},listen:function(){var b=this;b.$rating.on("click",function(a){b.inactive||(w=a.pageX-b.$rating.offset().left,b.setStars(w),b.$element.trigger("change"),b.$element.trigger("rating.change",[b.$element.val(),b.$caption.html()]))}),b.$clear.on("click",function(){b.inactive||b.clear()}),a(b.$element[0].form).on("reset",function(){b.inactive||b.reset()})},initSlider:function(a){var f=this;e(f.$element.val())&&f.$element.val(0),f.initialValue=f.$element.val(),f.min="undefined"!=typeof a.min?a.min:f._parseAttr("min",a),f.max="undefined"!=typeof a.max?a.max:f._parseAttr("max",a),f.step="undefined"!=typeof a.step?a.step:f._parseAttr("step",a),(isNaN(f.min)||e(f.min))&&(f.min=b),(isNaN(f.max)||e(f.max))&&(f.max=c),(isNaN(f.step)||e(f.step)||0==f.step)&&(f.step=d),f.diff=f.max-f.min},init:function(b){var c=this;c.options=b,c.initSlider(b),c.checkDisabled(),$element=c.$element,c.containerClass=b.containerClass,c.glyphicon=b.glyphicon;var d=c.glyphicon?"":"★";c.symbol=e(b.symbol)?d:b.symbol,c.rtl=b.rtl||c.$element.attr("dir"),c.rtl&&c.$element.attr("dir","rtl"),c.showClear=b.showClear,c.showCaption=b.showCaption,c.size=b.size,c.stars=b.stars,c.defaultCaption=b.defaultCaption,c.starCaptions=b.starCaptions,c.starCaptionClasses=b.starCaptionClasses,c.clearButton=b.clearButton,c.clearButtonTitle=b.clearButtonTitle,c.clearButtonBaseClass=e(b.clearButtonBaseClass)?"clear-rating":b.clearButtonBaseClass,c.clearButtonActiveClass=e(b.clearButtonActiveClass)?"clear-rating-active":b.clearButtonActiveClass,c.clearCaption=b.clearCaption,c.clearCaptionClass=b.clearCaptionClass,c.clearValue=b.clearValue,c.$element.removeClass("form-control").addClass("form-control"),c.$clearElement=e(b.clearElement)?null:a(b.clearElement),c.$captionElement=e(b.captionElement)?null:a(b.captionElement),"undefined"==typeof c.$rating&&"undefined"==typeof c.$container&&(c.$rating=a(document.createElement("div")).html('<div class="rating-stars"></div>'),c.$container=a(document.createElement("div")),c.$container.before(c.$rating),c.$container.append(c.$rating),c.$element.before(c.$container).appendTo(c.$rating)),c.$stars=c.$rating.find(".rating-stars"),c.generateRating(),c.$clear=e(c.$clearElement)?c.$container.find("."+c.clearButtonBaseClass):c.$clearElement,c.$caption=e(c.$captionElement)?c.$container.find(".caption"):c.$captionElement,c.setStars(),c.$element.hide(),c.listen(),c.showClear&&c.$clear.attr({"class":c.getClearClass()}),c.$element.removeClass("rating-loading")},checkDisabled:function(){var a=this;a.disabled=f(a.$element,"disabled",a.options),a.readonly=f(a.$element,"readonly",a.options),a.inactive=a.disabled||a.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var a=this,b=a.renderClear(),c=a.renderCaption(),d=a.rtl?"rating-container-rtl":"rating-container",f=a.getStars();d+=a.glyphicon?""==a.symbol?" rating-gly-star":" rating-gly":" rating-uni",a.$rating.attr("class",d),a.$rating.attr("data-content",f),a.$stars.attr("data-content",f);var d=a.rtl?"star-rating-rtl":"star-rating";a.$container.attr("class",d+" rating-"+a.size),a.inactive?a.$container.removeClass("rating-active").addClass("rating-disabled"):a.$container.removeClass("rating-disabled").addClass("rating-active"),"undefined"==typeof a.$caption&&"undefined"==typeof a.$clear&&(a.rtl?a.$container.prepend(c).append(b):a.$container.prepend(b).append(c)),e(a.containerClass)||a.$container.removeClass(a.containerClass).addClass(a.containerClass)},getStars:function(){for(var a=this,b=a.stars,c="",d=1;b>=d;d++)c+=a.symbol;return c},renderClear:function(){var a=this;if(!a.showClear)return"";var b=a.getClearClass();return e(a.$clearElement)?'<div class="'+b+'" title="'+a.clearButtonTitle+'">'+a.clearButton+"</div>":(a.$clearElement.removeClass(b).addClass(b).attr({title:a.clearButtonTitle}),a.$clearElement.html(a.clearButton),"")},renderCaption:function(){var a=this,b=a.$element.val();if(!a.showCaption)return"";var c=a.fetchCaption(b);return e(a.$captionElement)?'<div class="caption">'+c+"</div>":(a.$captionElement.removeClass("caption").addClass("caption").attr({title:a.clearCaption}),a.$captionElement.html(c),"")},fetchCaption:function(a){var b=this,c=parseFloat(a),d=e(b.starCaptionClasses[c])?b.clearCaptionClass:b.starCaptionClasses[c],f=e(b.starCaptions[c])?b.defaultCaption.replace(/\{rating\}/g,c):b.starCaptions[c],g=c==b.clearValue?b.clearCaption:f;return'<span class="'+d+'">'+g+"</span>"},getValueFromPosition:function(a){var b,c,d=this,e=g(d.step),f=d.$rating.width();return b=a/f,c=d.rtl?d.min+Math.floor(d.diff*b/d.step)*d.step:d.min+Math.ceil(d.diff*b/d.step)*d.step,c<d.min?c=d.min:c>d.max&&(c=d.max),c=h(parseFloat(c),e),d.rtl&&(c=d.max-c),c},setStars:function(a){var b=this,c=b.min,d=b.max,f=(b.step,arguments.length?b.getValueFromPosition(a):e(b.$element.val())?0:b.$element.val()),g=0,h=(b.$rating.width(),b.fetchCaption(f));g=(f-c)/d*100,b.rtl&&(g=100-g),b.$element.val(f),g+="%",b.$stars.css("width",g),b.$caption.html(h)},clear:function(){var a=this,b='<span class="'+a.clearCaptionClass+'">'+a.clearCaption+"</span>";a.$stars.removeClass("rated"),a.inactive||a.$caption.html(b),a.$element.val(a.clearValue),a.setStars(),a.$element.trigger("rating.clear")},reset:function(){var a=this;a.$element.val(a.initialValue),a.setStars(),a.$element.trigger("rating.reset")},update:function(a){if(arguments.length>0){var b=this;b.$element.val(a),b.setStars()}},refresh:function(b){var c=this;arguments.length&&(c.init(a.extend(c.options,b)),c.showClear?c.$clear.show():c.$clear.hide(),c.showCaption?c.$caption.show():c.$caption.hide())}},a.fn.rating=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var d=a(this),e=d.data("rating"),f="object"==typeof b&&b;e||d.data("rating",e=new i(this,a.extend({},a.fn.rating.defaults,f,a(this).data()))),"string"==typeof b&&e[b].apply(e,c)})},a.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:0,captionElement:null,clearElement:null,containerClass:null},a("input.rating").addClass("rating-loading"),a(document).ready(function(){var b=a("input.rating"),c=Object.keys(b).length;c>0&&b.rating()})}(jQuery);