define(["jquery","jquerySerialize","jqueyStarRating","underscore","backbone","models/movie/MovieModel","text!templates/movies/movieDetailTemplate.html","text!templates/movies/movieDetailActorsListTemplate.html","text!templates/movies/moviesRelatesTemplate.html"],function(a,b,c,d,e,f,g,h,i){var j=e.View.extend({el:a("#movie-detail"),events:{"click .cancel":"cancelItem"},model:{},initialize:function(a){var b=this;b.moviesCollection=a.moviesCollection,b.actorsCollection=a.actorsCollection,b.router=a.router},render:function(a){var b,c=this,e=a.id;c.moviesCollection.fetch(),e&&(b=c.moviesCollection.get(e),c.model=b,c.model.fetch({success:function(a){var b,f,j,k=d.template(g,{data:a}),l=c.$el,m=[];l.html(k);var n=l.find(".rating");n.rating(),n.on("rating.change",function(a,b){c.model.setRating(b),c.model.save(),n.rating("update",c.model.get("rating"))}),c.actorsCollection.fetch(),d.each(c.model.get("actorCollection"),function(a){m.push(c.actorsCollection.get(a))}),b=d.template(h,{data:m}),l.find(".movie-actor-list").html(b),j=c.moviesCollection.getRelatesMovies(e),f=d.template(i,{data:j}),l.find(".relates-movies-list").html(f)}})),c.show()},cancelItem:function(){this.router.navigate("movies",{trigger:!0})},hide:function(){this.$el.hide()},show:function(){this.$el.show()}});return j});