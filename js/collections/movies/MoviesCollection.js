define(["underscore","backboneLocalStorage","backbone","models/movie/MovieModel"],function(a,b,c,d){return MoviesCollection=c.Collection.extend({model:d,localStorage:new c.LocalStorage("bb-movies"),recents:function(){return this.models.slice(-10)},getMoviesByActor:function(b){var c,d=this;return c=d.filter(function(c){var d=!1;return c.get("actorCollection").length&&(d=a.contains(c.get("actorCollection"),b)),d})},getByNameSubstr:function(a){var b,c=this;return b=a?c.filter(function(b){return b.get("name").indexOf(a)>=0}):c.models},getRelatesMovies:function(b){var c,d=this,e=d.get(b);return c=d.filter(function(c){if(c.get("id")!==b){var d=[];if(d=a.intersection(e.get("actorCollection"),c.get("actorCollection")),d.length>0)return!0;if(d=a.intersection(e.get("genere"),c.get("genere")),d.length>0)return!0}return!1})}})});